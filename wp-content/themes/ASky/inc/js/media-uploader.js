jQuery(document).ready(function(n){function r(r,f){var o=n(".uploaded-file"),e=n(this);if(i=f,r.preventDefault(),t)t.open();else{t=wp.media.frames.optionsframework_upload=wp.media({title:e.data("choose"),button:{text:e.data("update"),close:!1}});t.on("select",function(){var r=t.state().get("selection").first();t.close();i.find(".upload").val(r.attributes.url);r.attributes.type=="image"&&i.find(".screenshot").empty().hide().append('<img src="'+r.attributes.url+'"><a class="remove-image">Remove<\/a>').slideDown("fast");i.find(".upload-button").unbind().addClass("remove-file").removeClass("upload-button").val(optionsframework_l10n.remove);i.find(".of-background-properties").slideDown();i.find(".remove-image, .remove-file").on("click",function(){u(n(this).parents(".section"))})})}t.open()}function u(t){t.find(".remove-image").hide();t.find(".upload").val("");t.find(".of-background-properties").hide();t.find(".screenshot").slideUp();t.find(".remove-file").unbind().addClass("upload-button").removeClass("remove-file").val(optionsframework_l10n.upload);n(".section-upload .upload-notice").length>0&&n(".upload-button").remove();t.find(".upload-button").on("click",function(t){r(t,n(this).parents(".section"))})}var t,i;n(".remove-image, .remove-file").on("click",function(){u(n(this).parents(".section"))});n(".upload-button").click(function(t){r(t,n(this).parents(".section"))})})