/*! Iris - v0.9.14 - 2012-11-20
* https://github.com/Automattic/Iris
* Copyright (c) 2012 Matt Wiebe; Licensed GPL */
(function(n,t){function h(){if(u)i="filter";else{var t=n('<div id="iris-gradtest" />'),r="linear-gradient(top,#fff,#000)";n.each(o,function(n,u){return t.css("backgroundImage",u+r),t.css("backgroundImage").match("gradient")?(i=n,!1):void 0});n.browser.webkit&&i===!1&&(t.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),t.css("backgroundImage").match("gradient")&&(i="webkit"));t.remove()}}function c(t,r){return t=t==="top"?"top":"left",r=n.isArray(r)?r:Array.prototype.slice.call(arguments,1),i==="webkit"?a(t,r):o[i]+"linear-gradient("+t+", "+r.join(", ")+")"}function l(t,i){t=t==="top"?"top":"left";i=n.isArray(i)?i:Array.prototype.slice.call(arguments,1);var r=t==="top"?0:1,u=n(this),s=i.length-1,e=parseInt(n.browser.version,10)>=8?"-ms-filter":"filter";e="filter";var h=r===1?"left":"top",c=r===1?"right":"bottom",l=r===1?"height":"width",a='<div class="iris-ie-gradient-shim" style="position:absolute;'+l+":100%;"+h+":%start%;"+c+":%end%;"+e+':%filter%;" data-color:"%color%"><\/div>',o="";u.css("position")==="static"&&u.css({position:"relative"});i=f(i);n.each(i,function(n,t){var u,f,e;if(n===s)return!1;(u=i[n+1],t.stop!==u.stop)&&(f=100-parseFloat(u.stop)+"%",t.octoHex=new Color(t.color).toIEOctoHex(),u.octoHex=new Color(u.color).toIEOctoHex(),e="progid:DXImageTransform.Microsoft.Gradient(GradientType="+r+", StartColorStr='"+t.octoHex+"', EndColorStr='"+u.octoHex+"')",o+=a.replace("%start%",t.stop).replace("%end%",f).replace("%filter%",e))});u.find(".iris-ie-gradient-shim").remove();n(o).prependTo(u)}function a(t,i){var r=[];return t=t==="top"?"0% 0%,0% 100%,":"0% 100%,100% 100%,",i=f(i),n.each(i,function(n,t){r.push("color-stop("+parseFloat(t.stop)/100+", "+t.color+")")}),"-webkit-gradient(linear,"+t+r.join(",")+")"}function f(t){var r=[],i=[],u=[],f=t.length-1;return n.each(t,function(n,t){var u=t,f=!1,e=t.match(/1?[0-9]{1,2}%$/);e&&(u=t.replace(/\s?1?[0-9]{1,2}%$/,""),f=e.shift());r.push(u);i.push(f)}),i[0]===!1&&(i[0]="0%"),i[f]===!1&&(i[f]="100%"),i=e(i),n.each(i,function(n){u[n]={color:r[n],stop:i[n]}}),u}function e(t){var r=0,u=t.length-1,i=0,f=!1,h,c,o,s;if(t.length<=2||n.inArray(!1,t)<0)return t;while(i<t.length-1)!f&&t[i]===!1?(r=i-1,f=!0):f&&t[i]!==!1&&(u=i,i=t.length),i++;for(c=u-r,s=parseInt(t[r].replace("%"),10),h=(parseFloat(t[u].replace("%"))-s)/c,i=r+1,o=1;i<u;)t[i]=s+o*h+"%",o++,i++;return e(t)}var r='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value" href="#"><span class="iris-square-handle ui-slider-handle"><\/span><\/a><div class="iris-square-inner iris-square-horiz"><\/div><div class="iris-square-inner iris-square-vert"><\/div><\/div><div class="iris-slider iris-strip"><div class="iris-slider-offset"><\/div><\/div><\/div><\/div>',u=!!(n.browser.msie&&parseInt(n.browser.version,10)<10),i=!1,o=["-moz-","-webkit-","-o-","-ms-"],s;if(u&&parseInt(n.browser.version,10)<=7)return n.fn.iris=n.noop;n.fn.gradient=function(){var t=arguments;return this.each(function(){u?l.apply(this,t):n(this).css("backgroundImage",c.apply(this,t))})};n.fn.raninbowGradient=function(t,i){t=t||"top";for(var u=n.extend({},{s:100,l:50},i),e="hsl(%h%,"+u.s+"%,"+u.l+"%)",r=0,f=[];r<=360;)f.push(e.replace("%h%",r)),r+=30;return this.each(function(){n(this).gradient(t,f)})};s={options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1},_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_scale:{h:360,s:100,l:100,v:100},_create:function(){var t=this,u=t.element,e=t.options.color||u.val(),f;i===!1&&h();u.is("input")?(t.picker=t.options.target?n(r).appendTo(t.options.target):n(r).insertAfter(u),t._addInputListeners(u)):(u.append(r),t.picker=u.find(".iris-picker"));n.browser.mozilla?t.picker.addClass("iris-mozilla"):n.browser.msie&&(f=parseInt(n.browser.version,10),f===9?t.picker.addClass("iris-ie-9"):f<=8&&t.picker.addClass("iris-ie-lt9"));t.options.palettes&&t._addPalettes();t.color=new Color(e).setHSpace(t.options.mode);t.options.color=t.color.toString();t.controls={square:t.picker.find(".iris-square"),squareDrag:t.picker.find(".iris-square-value"),horiz:t.picker.find(".iris-square-horiz"),vert:t.picker.find(".iris-square-vert"),strip:t.picker.find(".iris-strip"),stripSlider:t.picker.find(".iris-strip .iris-slider-offset")};t.options.mode==="hsv"&&t.options.controls.vert==="l"&&(t.options.controls={horiz:"h",vert:"v",strip:"s"});t.hue=t.color.h();t.options.hide&&t.picker.hide();t.options.border&&t.picker.addClass("iris-border");t._initControls();t.active="external";t._dimensions();t._change()},_addPalettes:function(){var t=n("<div class='iris-palette-container' />"),i=n("<a class='iris-palette' tabindex='0' />"),r=n.isArray(this.options.palettes)?this.options.palettes:this._palettes;n.each(r,function(n,r){i.clone().data("color",r).css("backgroundColor",r).appendTo(t).height(10).width(10)});this.picker.append(t)},_paint:function(){var n=this;n._paintDimension("top","strip");n._paintDimension("top","vert");n._paintDimension("left","horiz")},_paintDimension:function(n,t){var u=this,f=u.color,s=u.options.mode,i=u._getHSpaceColor(),e=u.controls[t],o=u.options.controls,r;if(t!==u.active&&(u.active!=="square"||t==="strip"))switch(o[t]){case"h":if(s==="hsv"){i=f.clone();switch(t){case"horiz":i[o.vert](100);break;case"vert":i[o.horiz](100);break;case"strip":i.setHSpace("hsl")}r=i.toHsl()}else r=t==="strip"?{s:i.s,l:i.l}:{s:100,l:i.l};e.raninbowGradient(n,r);break;case"s":s==="hsv"?t==="vert"?r=[f.clone().a(0).s(0).toCSS("rgba"),f.clone().a(1).s(0).toCSS("rgba")]:t==="strip"?r=[f.clone().s(100).toCSS("hsl"),f.clone().s(0).toCSS("hsl")]:t==="horiz"&&(r=["#fff","hsl("+i.h+",100%,50%)"]):r=t==="vert"&&u.options.controls.horiz==="h"?["hsla(0, 0%, "+i.l+"%, 0)","hsla(0, 0%, "+i.l+"%, 1)"]:["hsl("+i.h+",0%,50%)","hsl("+i.h+",100%,50%)"];e.gradient(n,r);break;case"l":r=t==="strip"?["hsl("+i.h+",100%,100%)","hsl("+i.h+", "+i.s+"%,50%)","hsl("+i.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"];e.gradient(n,r);break;case"v":r=t==="strip"?[f.clone().v(100).toCSS(),f.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"];e.gradient(n,r)}},_getHSpaceColor:function(){return this.options.mode==="hsv"?this.color.toHsv():this.color.toHsl()},_dimensions:function(t){var r=this,u=r.options,w=r.picker.find(".iris-picker-inner"),p=r.controls,h=p.square,o=r.picker.find(".iris-strip"),i="77.5%",s="12%",c=20,l=u.border?u.width-c:u.width,a,v=n.isArray(u.palettes)?u.palettes.length:r._palettes.length,f,e,y;(t&&(h.css("width",""),o.css("width",""),r.picker.removeAttr("style")),i=l*(parseFloat(i)/100),s=l*(parseFloat(s)/100),a=u.border?i+c:i,h.width(i).height(i),o.height(i).width(s),r.picker.css({width:u.width,height:a}),u.palettes)&&(f=i/50,y=i-(v-1)*f,e=y/v,r.picker.find(".iris-palette").each(function(t){var i=t===0?0:f;n(this).css({width:e,height:e,marginLeft:i})}),r.picker.css("paddingBottom",e+f),o.height(e+f+i))},_addInputListeners:function(n){var t=this,i=function(i){var r=new Color(n.val()),u=n.val().replace(/^#/,"");n.removeClass("iris-error");r.error?u!==""&&n.addClass("iris-error"):r.toString()!==t.color.toString()&&(i.type!=="keyup"||!u.match(/^[0-9a-fA-F]{3}$/))&&t._setOption("color",r.toString())};n.on("change",i).on("keyup",t._debounce(i,100))},_initControls:function(){var t=this,i=t.controls,r=i.square,u=t.options.controls,f=t._scale[u.strip];i.stripSlider.slider({orientation:"vertical",max:f,slide:function(n,i){t.active="strip";u.strip==="h"&&(i.value=f-i.value);t.color[u.strip](i.value);t._change.apply(t,arguments)}});i.squareDrag.draggable({containment:"parent",zIndex:1e3,cursor:"move",drag:function(n,i){t._squareDrag(n,i)},start:function(){r.addClass("iris-dragging");n(this).addClass("ui-state-focus")},stop:function(){r.removeClass("iris-dragging");n(this).removeClass("ui-state-focus")}}).on("mousedown mouseup",function(i){i.preventDefault();var r="ui-state-focus";i.type==="mousedown"?(t.picker.find("."+r).removeClass(r).blur(),n(this).addClass(r).focus()):n(this).removeClass(r)}).on("keydown",function(n){var f=i.square,e=i.squareDrag,r=e.position(),u=t.options.width/100;n.altKey&&(u*=10);switch(n.keyCode){case 37:r.left-=u;break;case 38:r.top-=u;break;case 39:r.left+=u;break;case 40:r.top+=u;break;default:return!0}r.left=Math.max(0,Math.min(r.left,f.width()));r.top=Math.max(0,Math.min(r.top,f.height()));e.css(r);t._squareDrag(n,{position:r});n.preventDefault()});r.mousedown(function(i){if(i.which===1&&n(i.target).is("div")){var r=t.controls.square.offset(),u={top:i.pageY-r.top,left:i.pageX-r.left};i.preventDefault();t._squareDrag(i,{position:u});i.target=t.controls.squareDrag.get(0);t.controls.squareDrag.css(u).trigger(i)}});t.options.palettes&&t.picker.find(".iris-palette-container").on("click",".iris-palette",function(){t.color.fromCSS(n(this).data("color"));t.active="external";t._change()}).on("keydown",".iris-palette",function(t){if(t.keyCode!==13&&t.keyCode!==32)return!0;t.stopPropagation();n(this).click()})},_squareDrag:function(n,t){var i=this,r=i.options.controls,u=i._squareDimensions(),f=Math.round((u.h-t.position.top)/u.h*i._scale[r.vert]),e=i._scale[r.horiz]-Math.round((u.w-t.position.left)/u.w*i._scale[r.horiz]);i.color[r.horiz](e)[r.vert](f);i.active="square";i._change.apply(i,arguments)},_setOption:function(n,t){var u=this.options[n],r,i;n==="color"&&(t=""+t,r=t.replace(/^#/,""),i=new Color(t).setHSpace(this.options.mode),i.error||(this.color=i,this.options.color=this.options[n]=this.color.toString(),this.active="external",this._change()))},_squareDimensions:function(n){var i=this.controls.square,r,u;return n!==t&&i.data("dimensions")?i.data("dimensions"):(u=this.controls.squareDrag,r={w:i.width(),h:i.height()},i.data("dimensions",r),r)},_isNonHueControl:function(n,t){return n==="square"&&this.options.controls.strip==="h"?!0:t==="external"||t==="h"&&n==="strip"?!1:!0},_change:function(){var t=this,e=t.controls,r=t._getHSpaceColor(),s=t.color.toString(),u=["square","strip"],i=t.options.controls,o=i[t.active]||"external",f=t.hue;t.active==="strip"?u=[]:t.active!=="external"&&u.pop();n.each(u,function(n,u){var o,f,s;if(u!==t.active)switch(u){case"strip":o=i.strip==="h"?t._scale[i.strip]-r[i.strip]:r[i.strip];e.stripSlider.slider("value",o);break;case"square":f=t._squareDimensions();s={left:r[i.horiz]/t._scale[i.horiz]*f.w,top:f.h-r[i.vert]/t._scale[i.vert]*f.h};t.controls.squareDrag.css(s)}});r.h!==f&&t._isNonHueControl(t.active,o)&&t.color.h(f);t.hue=t.color.h();t.options.color=t.color.toString();t._inited&&t._trigger("change",{type:t.active},{color:t.color});t.element.is(":input")&&!t.color.error&&(t.element.removeClass("iris-error"),t.element.val()!==t.color.toString()&&t.element.val(t.color.toString()));t._paint();t._inited=!0;t.active=!1},_debounce:function(n,t,i){var r,u;return function(){var f=this,e=arguments,o=function(){r=null;i||(u=n.apply(f,e))},s=i&&!r;return clearTimeout(r),r=setTimeout(o,t),s&&(u=n.apply(f,e)),u}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()}};n.widget("a8c.iris",s);n('<style id="iris-css">.iris-picker{display:block;position:relative}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,0.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:n1;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:n1;border:3px solid #fff;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:n1;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}<\/style>').appendTo("head")})(jQuery),function(n,t){var i=function(n,t){return this instanceof i?this._init(n,t):new i(n,t)},r,u;i.fn=i.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(n){var i="noop";switch(typeof n){case"object":return n.a!==t&&this.a(n.a),i=n.r!==t?"fromRgb":n.l!==t?"fromHsl":n.v!==t?"fromHsv":i,this[i](n);case"string":return this.fromCSS(n);case"number":return this.fromInt(parseInt(n,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var r=new i(this.toInt()),t=["_alpha","_hSpace","_hsl","_hsv","error"],n=t.length-1;n>=0;n--)r[t[n]]=this[t[n]];return r},setHSpace:function(n){return this._hSpace=n==="hsv"?n:"hsl",this},noop:function(){return this},fromCSS:function(n){var t,r=/^(rgb|hs(l|v))a?\(/,i;if(this.error=!1,n=n.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,""),n.match(r)&&n.match(/\)$/)){if(t=n.replace(/(\s|%)/g,"").replace(r,"").replace(/,?\);?$/,"").split(","),t.length<3)return this._error();if(t.length===4&&(this.a(parseFloat(t.pop())),this.error))return this;for(i=t.length-1;i>=0;i--)if(t[i]=parseInt(t[i],10),isNaN(t[i]))return this._error();return n.match(/^rgb/)?this.fromRgb({r:t[0],g:t[1],b:t[2]}):n.match(/^hsv/)?this.fromHsv({h:t[0],s:t[1],v:t[2]}):this.fromHsl({h:t[0],s:t[1],l:t[2]})}return this.fromHex(n)},fromRgb:function(n,i){return typeof n!="object"||n.r===t||n.g===t||n.b===t?this._error():(this.error=!1,this.fromInt(parseInt((n.r<<16)+(n.g<<8)+n.b,10),i))},fromHex:function(n){return n=n.replace(/^#/,"").replace(/^0x/,""),n.length===3&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),this.error=!/^[0-9A-F]{6}$/i.test(n),this.fromInt(parseInt(n,16))},fromHsl:function(n){var o,s,h,r,f,e,u,i;return typeof n!="object"||n.h===t||n.s===t||n.l===t?this._error():(this._hsl=n,this._hSpace="hsl",e=n.h/360,u=n.s/100,i=n.l/100,u===0?o=s=h=i:(r=i<.5?i*(1+u):i+u-i*u,f=2*i-r,o=this.hue2rgb(f,r,e+1/3),s=this.hue2rgb(f,r,e),h=this.hue2rgb(f,r,e-1/3)),this.fromRgb({r:o*255,g:s*255,b:h*255},!0))},fromHsv:function(n){var c,o,i,r,u,f,l,a,e,s,h;if(typeof n!="object"||n.h===t||n.s===t||n.v===t)return this._error();this._hsv=n;this._hSpace="hsv";c=n.h/360;o=n.s/100;i=n.v/100;l=Math.floor(c*6);a=c*6-l;e=i*(1-o);s=i*(1-a*o);h=i*(1-(1-a)*o);switch(l%6){case 0:r=i;u=h;f=e;break;case 1:r=s;u=i;f=e;break;case 2:r=e;u=i;f=h;break;case 3:r=e;u=s;f=i;break;case 4:r=h;u=e;f=i;break;case 5:r=i;u=e;f=s}return this.fromRgb({r:r*255,g:u*255,b:f*255},!0)},fromInt:function(n,i){return this._color=parseInt(n,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),i===t&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(n,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?n+(t-n)*6*i:i<.5?t:i<2/3?n+(t-n)*(2/3-i)*6:n},toString:function(){var n=parseInt(this._color,10).toString(16),t;if(this.error)return"";if(n.length<6)for(t=5-n.length;t>=0;t--)n="0"+n;return"#"+n},toCSS:function(n,t){var i,r;n=n||"hex";t=parseFloat(t||this._alpha);switch(n){case"rgb":case"rgba":return i=this.toRgb(),t<1?"rgba( "+i.r+", "+i.g+", "+i.b+", "+t+" )":"rgb( "+i.r+", "+i.g+", "+i.b+" )";case"hsl":case"hsla":return r=this.toHsl(),t<1?"hsla( "+r.h+", "+r.s+"%, "+r.l+"%, "+t+" )":"hsl( "+r.h+", "+r.s+"%, "+r.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var s=this.toRgb(),e=s.r/255,i=s.g/255,r=s.b/255,u=Math.max(e,i,r),o=Math.min(e,i,r),n,t,h=(u+o)/2,f;if(u===o)n=t=0;else{f=u-o;t=h>.5?f/(2-u-o):f/(u+o);switch(u){case e:n=(i-r)/f+(i<r?6:0);break;case i:n=(r-e)/f+2;break;case r:n=(e-i)/f+4}n/=6}return n=Math.round(n*360),n===0&&this._hsl.h!==n&&(n=this._hsl.h),t=Math.round(t*100),t===0&&this._hsl.s&&(t=this._hsl.s),{h:n,s:t,l:Math.round(h*100)}},toHsv:function(){var o=this.toRgb(),f=o.r/255,i=o.g/255,r=o.b/255,u=Math.max(f,i,r),s=Math.min(f,i,r),n,t,h=u,e=u-s;if(t=u===0?0:e/u,u===s)n=t=0;else{switch(u){case f:n=(i-r)/e+(i<r?6:0);break;case i:n=(r-f)/e+2;break;case r:n=(f-i)/e+4}n/=6}return n=Math.round(n*360),n===0&&this._hsv.h!==n&&(n=this._hsv.h),t=Math.round(t*100),t===0&&this._hsv.s&&(t=this._hsv.s),{h:n,s:t,v:Math.round(h*100)}},toInt:function(){return this._color},toIEOctoHex:function(){var t=this.toString(),n=parseInt(255*this._alpha,10).toString(16);return n.length===1&&(n="0"+n),"#"+n+t.replace(/^#/,"")},toLuminosity:function(){var n=this.toRgb();return.2126*Math.pow(n.r/255,2.2)+.7152*Math.pow(n.g/255,2.2)+.0722*Math.pow(n.b/255,2.2)},getDistanceLuminosityFrom:function(n){if(n instanceof i){var t=this.toLuminosity(),r=n.toLuminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)}throw"getDistanceLuminosityFrom requires a Color object";},getMaxContrastColor:function(){var n=this.toLuminosity(),t=n>=.5?"000000":"ffffff";return new i(t)},getGrayscaleContrastingColor:function(n){var i,t,r;if(!n)return this.getMaxContrastColor();if(i=n<5?5:n,t=this.getMaxContrastColor(),n=t.getDistanceLuminosityFrom(this),n<=i)return t;for(r=0===t.toInt()?1:-1;n>i;)t=t.incrementLightness(r),n=t.getDistanceLuminosityFrom(this);return t},getReadableContrastingColor:function(n,r){var o;if(!n instanceof i)return this;var u=r===t?5:r,f=n.getDistanceLuminosityFrom(this),e=n.getMaxContrastColor(),s=e.getDistanceLuminosityFrom(n);if(s<=u)return e;if(f>=u)return this;for(o=0===e.toInt()?-1:1;f<u;)if(this.incrementLightness(o),f=this.getDistanceLuminosityFrom(n),this._color===0||this._color===16777215)break;return this},a:function(n){if(n===t)return this._alpha;var i=parseFloat(n);return isNaN(i)?this._error():(this._alpha=i,this)},darken:function(n){return n=n||5,this.l(-n,!0)},lighten:function(n){return n=n||5,this.l(n,!0)},saturate:function(n){return n=n||15,this.s(n,!0)},desaturate:function(n){return n=n||15,this.s(-n,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(n){n=n||1;var t=180+n*30;return this.h(t,!0)},getAnalog:function(n){n=n||1;var t=n*30;return this.h(t,!0)},getTetrad:function(n){n=n||1;var t=n*60;return this.h(t,!0)},getTriad:function(n){n=n||1;var t=n*120;return this.h(t,!0)},_partial:function(n){var i=r[n];return function(r,u){var f=this._spaceFunc("to",i.space);return r===t?f[n]:(u===!0&&(r=f[n]+r),i.mod&&(r%=i.mod),i.range&&(r=r<i.range[0]?i.range[0]:r>i.range[1]?i.range[1]:r),f[n]=r,this._spaceFunc("from",i.space,f))}},_spaceFunc:function(n,t,i){var r=t||this._hSpace,u=n+r.charAt(0).toUpperCase()+r.substr(1);return this[u](i)}};r={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(u in r)r.hasOwnProperty(u)&&(i.fn[u]=i.fn._partial(u));n.Color=i}(typeof exports=="object"&&exports||this)