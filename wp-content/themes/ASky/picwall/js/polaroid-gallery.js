var polaroidGallery=function(){function s(){i=0;n={};t=null;l();var r;$.ajax({url:"https://api.isoyu.com/index.php/api/Picture/hua_ban",async:!1,type:"GET",data:{},success:function(n){r=n.data;a()}});console.log("%c 自动加载时倒计时 %c","background:#9a9da2; color:#ffffff; border-radius:4px;","","http://skyarea.cn",r);h(r);c(r)}function h(n){for(var i="",t=0;t<n.length;t++)i+='<figure id="'+t+'"><img id="img'+t+'" src="" alt=""/><figcaption>'+n[t].title+"<\/figcaption><\/figure>";document.getElementById("gallery").innerHTML=i}function c(n){var t=0;setTimeout(function i(){document.getElementById("img"+t).src=n[t].img;t++;t<n.length&&setTimeout(i,10)},10)}function l(){var f=function(){var n=window.MutationObserver||window.WebKitMutationObserver,t=window.addEventListener;return function(i,r){if(n){var u=new n(function(n){(n[0].addedNodes.length||n[0].removedNodes.length)&&r(n)});u.observe(i,{childList:!0,subtree:!1})}else t&&i.addEventListener("DOMNodeInserted",r,!1)}}();f(document.getElementById("gallery"),function(f){var e=[].slice.call(f[0].addedNodes),s=1;e.forEach(function(f){var h=f.getElementsByTagName("img")[0],e=!0;h.addEventListener("load",function(){e&&(t=f,e=!1);n[f.id]={item:f,width:f.offsetWidth,height:f.offsetHeight};i++;f.addEventListener("click",function(){r(f);u()});o(f,s++)})})})}function a(){e=document.getElementById("nav").offsetHeight;v();window.addEventListener("resize",function(){f&&clearTimeout(f);f=setTimeout(function(){u();t&&r(t)},100)})}function r(i){var r=2,u=0,s=n[i.id].width,c=n[i.id].height,h=s*r,l=c*(h/s),f=(window.innerWidth-h)/2,o=(window.innerHeight-e-l)/2;i.style.transformOrigin="0 0";i.style.WebkitTransform="translate("+f+"px,"+o+"px) rotate("+u+"deg) scale("+r+","+r+")";i.style.msTransform="translate("+f+"px,"+o+"px) rotate("+u+"deg) scale("+r+","+r+")";i.style.transform="translate("+f+"px,"+o+"px) rotate("+u+"deg) scale("+r+","+r+")";i.style.zIndex=999;t=i}function o(n,t){var o=Math.random(),s=Math.random(),e=-45,i=Math.random()*(45-e)+e,r=i*Math.PI/180,h=Math.abs(n.offsetWidth*Math.cos(r))+Math.abs(n.offsetHeight*Math.sin(r)),c=Math.abs(n.offsetWidth*Math.sin(r))+Math.abs(n.offsetHeight*Math.cos(r)),u=Math.floor((window.innerWidth-h)*o),f=Math.floor((window.innerHeight-c)*s);n.style.transformOrigin="0 0";n.style.WebkitTransform="translate("+u+"px,"+f+"px) rotate("+i+"deg) scale(1)";n.style.msTransform="translate("+u+"px,"+f+"px) rotate("+i+"deg) scale(1)";n.style.transform="translate("+u+"px,"+f+"px) rotate("+i+"deg) scale(1)";n.style.zIndex=t}function u(){var r=0;for(var i in n)i!=t.id&&o(n[i].item,r++)}function v(){var f=document.getElementById("next"),e=document.getElementById("preview");f.addEventListener("click",function(){var f=Number(t.id)+1;f>=i&&(f=0);r(n[f].item);u()});e.addEventListener("click",function(){var f=Number(t.id)-1;f<0&&(f=i-1);r(n[f].item);u()})}var n={},i=0,t=null,e=60,f=null;return s}()